<div class="container">
  <h1>Gestione Ordini</h1>

  <!-- Messaggio di caricamento -->
  <div *ngIf="isLoading" class="loading">
    <p>Caricamento ordini...</p>
  </div>

  <!-- Messaggio di errore -->
  <div *ngIf="error" class="error">
    <p>{{ error }}</p>
    <button (click)="loadOrders()">Riprova</button>
  </div>

  <!-- Lista ordini -->
  <div *ngIf="!isLoading && !error" class="orders-container">
    <div *ngIf="orders.length === 0" class="empty">
      <p>Nessun ordine disponibile</p>
    </div>

    <div *ngFor="let order of orders" class="order-card">
      <div class="order-header">
        <h3>Ordine #{{ order.id }}</h3>
        <span class="status" [ngClass]="'status-' + order.status.toLowerCase().replace(' ', '-')">{{ order.status }}</span>
      </div>

      <div class="order-details">
        <p><strong>Totale:</strong> €{{ order.totale.toFixed(2) }}</p>
        <p><strong>Data:</strong> {{ order.created_at | date: 'short' }}</p>
      </div>

      <div class="order-items">
        <h4>Articoli:</h4>
        <ul>
          <li *ngFor="let item of order.items">
            {{ item.nome }} x{{ item.quantity }} - €{{ (item.prezzo_unitario * item.quantity).toFixed(2) }}
          </li>
        </ul>
      </div>

      <div class="order-actions">
        <select
          (change)="onStatusChange($event, order.id)"
          [value]="order.status"
          class="status-select"
        >
          <option value="In Attesa">In Attesa</option>
          <option value="In Preparazione">In Preparazione</option>
          <option value="Pronto">Pronto</option>
          <option value="Consegnato">Consegnato</option>
        </select>
        <button (click)="deleteOrder(order.id)" class="delete-btn">Elimina</button>
      </div>
    </div>
  </div>
</div>
